# Sequence_Game

### 【2021.9.1更新】
1. 匹配机制改变：同一等级卓内将不按照R值匹配，改为随机匹配，以尽可能避免多次匹配到相同玩家（尤其是在高等级卓中）
2. 大幅提升上级卓、特上卓和顶级卓的开启人数限制：
（1）上级卓（up）人数达到50000时才会匹配；
（2）特上卓（upper）人数达到5000时才会匹配；
（3）顶级卓（top）人数达到500时才会匹配
3. 增加了人类用户自动等待机制，即如果某一轮中没有人类选手的比赛，该轮结束后将自动进入下一轮，直到人类选手匹配到比赛为止。
4. 为人类选手增加了胜率计算器，在人类玩家每次给出数字前计算该数字可以得分的概率供人类玩家参考。
---


##  开始游戏
**【第一次游戏和想要重置游戏请看这里】**
如果你是第一次游戏，请按照下面的步骤进行：
1. 运行reset-Human.exe。在该文件夹下将会出现profile.csv和362881.txt两个文件。其中：
(1)profile.csv用于存放所有序列的数据。id为362881的就是玩家的数据
(2)362881.txt用于记录玩家进行的每局游戏的具体情况，玩家可用于复盘游戏。
请务必确保两个文件成功生成！
2. 运行competition-Human.exe开始游戏。系统将根据你的水平匹配对手进行游戏。

**【不是第一次游戏】**
直接运行competition-Human.exe开始游戏



## 游戏规则

数字竞技是一个通过使用1-9的数字与其他玩家的数字比较大小进而获得分数的游戏。
每一场游戏由4名水平相当的玩家进行，每名玩家初始均拥有1-9的数字。游戏一共进行9轮，每一轮每名玩家均需要使用一个数字，使用完的数字将被移除。每一轮所有玩家给出数字后，按照如下规则决定本轮分数的归属：
1. 所有出相同数字的玩家本轮均不能得分；
2. 剩下的玩家中数字最大的玩家得到本轮的分数。

例子：
（1）四名玩家给出的数字是：(9,8,5,2)，由于没有重复情况，由于9最大，出9的玩家得到本轮分数
（2）四名玩家给出的数字是：(9,9,5,2)，出9的玩家有两名，则都不能得分。剩下的数字中5最大，出5的玩家得到本轮分数
（3）四名玩家给出的数字是：(9,9,2,2)，出9的玩家有两名，则都不能得分。出2的玩家有两名，则都不能得分。
在本游戏中，游戏一共进行9轮，第k轮的分数为k，即第1轮1分，第2轮2分......第9轮9分，一共45分。
**特别提醒！！如果游戏进行的过程中一名玩家的分数达到23分，本场游戏将提前结束！！**
一场游戏结束后，根据分数的高低决定玩家的名次（1-4）。如果存在相同分数，则由系统随机指定名次。

## 升降级规则
本游戏借用了天凤的升降级制度，具体如下：
1-9的所有不重复序列一共362880种，我们视为362880名玩家，加上人类玩家1名，一共362881名玩家。每名玩家均包含段位和R值用于评估实力。

### 段位和pt
k代表级位，d代表段位
达到升段所需pt则升段，pt更新为新段位初始pt
有降段的段位，当pt低于0时降段，pt更新为新段位初始pt
所有玩家初始段位为10k/0pt

段位|初始pt|升段所需pt|是否有降段
-----|--------|-------------|---------
10k|0|20|无
9k|0|20|无
8k|0|20|无
7k|0|20|无
6k|0|40|无
5k|0|60|无
4k|0|80|无
3k|0|100|无
2k|0|100|无
1k|0|100|无
1d|200|400|有
2d|400|800|有
3d|600|1200|有
4d|800|1600|有
5d|1000|2000|有
6d|1200|2400|有
7d|1400|2800|有
8d|1600|3200|有
9d|1800|3600|有
10d|2000|4000|有
天凤位|4000|----|无

### R值
R值在每一场游戏结束后更新。**所有玩家的初始R值为1500**
新的R值 = 游戏前R值 + ΔR
ΔR = (局数修正值)×(游戏结果+桌水平修正值)
1. 局数修正值：
玩家已进行游戏场数<400：局数修正值 = 1 - 玩家已进行游戏场数 × 0.002
玩家已进行游戏场数>=400：局数修正值 = 0.2
2. 游戏结果：
1位：+30 
2位：+10 
3位：-10 
4位：-30
3. 桌水平修正值：
桌水平修正值 = (参与游戏的4名玩家游戏前的平均R值 - 自己游戏前的R值) / 40
**若参与游戏的4名玩家游戏前的平均R值<1500则视为1500**

### 不同水平的卓以及获取pt
游戏包含4种不同水平的卓让不同水平的玩家进行竞技，为了确保不同场次的水平有区分，每一个场次对于玩家的段位和R值有不同的要求：
|卓| 入场条件 |
|--|--|
|一般卓（normal desk）|段位<1k或R<1500|
| 上级卓（upper desk） | 段位>=1k且R>=1500 |
|特上卓（upper desk）|段位>=4d且R>=1800|
|顶级卓（top desk）|段位>=7d且R>=2000|

玩家如果满足若干个卓的要求，系统会自动将其分配至最高水平的卓。
玩家每一场游戏结束后将根据名次结算pt：
1. 如果你的名次是1位或者2位，则你的pt根据**卓的不同**进行计算：

|卓|1位|2位|
|--|--|--|
|一般卓|+30pt|+15pt|
|上级卓|+60pt|+15pt|
|特上卓|+75pt|+30pt|
|顶级卓|+90pt|+45pt|

2. 如果你的名次是3位，无论你在哪个卓，pt+0
3. 如果你的名次是4位，则你的pt根据你的**段位**进行计算：

|段位|4位的pt变化|
|--|--|
|10k~3k|-0pt|
|2k|-15pt|
|1k|-30pt|
|1d|-45pt|
|2d|-60pt|
|3d|-75pt|
|4d|-90pt|
|5d|-105pt|
|6d|-120pt|
|7d|-135pt|
|8d|-150pt|
|9d|-165pt|
|10d|-180pt|
